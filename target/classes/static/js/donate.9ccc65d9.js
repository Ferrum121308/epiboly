(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["donate"],{47267:function(t,e,o){},"52bd":function(t,e,o){"use strict";o("47267")},"8c81":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticStyle:{"margin-bottom":"10px"}},[a("div",[a("el-dropdown",{on:{command:t.handleCommand}},[a("el-button",{attrs:{type:"primary"}},[t._v("\n                    "+t._s(t.buttonName)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"所有商品"}},[t._v("所有商品")]),a("el-dropdown-item",{attrs:{command:"先租后买"}},[t._v("先租后买")]),a("el-dropdown-item",{attrs:{command:"以租代售"}},[t._v("以租代售")]),a("el-dropdown-item",{attrs:{command:"共享租赁"}},[t._v("共享租赁")])],1)],1),a("el-input",{staticClass:"goodsHeader",staticStyle:{width:"500px"},attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.searchGoods}},[t._v("搜索")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-shopping-cart-full"},on:{click:t.checkCart}},[t._v("查看租赁购物车")]),a("el-button",{attrs:{type:"success",icon:"el-icon-s-order"},on:{click:t.checkOrder}},[t._v("查看订单")]),a("el-tag",{staticStyle:{"margin-left":"30px"},attrs:{type:"info"}},[t._v("通知：目前暂时不支持查看商品详情")])],1)]),a("el-row",{attrs:{gutter:13}},t._l(t.goodsList,(function(e,s){return a("el-col",{key:e.goodId,attrs:{span:6}},[a("el-card",{staticClass:"mgb20",staticStyle:{height:"450px",width:"300px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"user-info"},[a("img",{staticClass:"user-avator",attrs:{src:o("c274"),alt:""}})]),a("div",{staticClass:"user-info-list red"},[a("span",[t._v("￥"+t._s(e.goodPrice))]),a("span",{staticStyle:{"margin-left":"10px","margin-bottom":"5px"}},[1==e.goodStatus?a("el-tag",[t._v("先租后买")]):2==e.goodStatus?a("el-tag",{attrs:{type:"success"}},[t._v("以租代售")]):a("el-tag",{attrs:{type:"warning"}},[t._v("共享租赁")])],1)]),a("div",{staticClass:"user-info-list normal"},[a("span",[t._v(t._s(e.goodName))])]),a("div",{staticClass:"user-info-list"},[a("i",{staticClass:"el-icon-s-shop"}),a("span",[t._v(t._s(e.goodOwner))])]),a("div",{staticClass:"user-info-list",staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-shopping-cart-2"},on:{click:function(o){return t.addToCart(e)}}},[t._v("加入购物车")])],1)])],1)})),1),a("el-dialog",{attrs:{title:"购物车",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{attrs:{data:t.gridData,height:"300"}},[a("el-table-column",{attrs:{property:"goodNum",label:"商品编号"}}),a("el-table-column",{attrs:{property:"goodName",label:"商品名称"}}),a("el-table-column",{attrs:{property:"goodPrice",label:"单价"}}),a("el-table-column",{attrs:{property:"goodOwner",label:"租方"}}),a("el-table-column",{attrs:{property:"goodStatus",label:"租赁方式"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.rentForSure}},[t._v("确 定 租 赁")])],1)],1),a("el-dialog",{attrs:{title:"订单预览",visible:t.dialogOrderVisible,width:"50%"},on:{"update:visible":function(e){t.dialogOrderVisible=e}}},[a("div",[t._v("订单编号："+t._s(t.uuid))]),a("el-table",{attrs:{data:t.gridOrderData,height:"300"}},[a("el-table-column",{attrs:{property:"goodNum",label:"商品编号"}}),a("el-table-column",{attrs:{property:"goodName",label:"商品名称"}}),a("el-table-column",{attrs:{property:"goodPrice",label:"单价"}}),a("el-table-column",{attrs:{property:"goodOwner",label:"租方"}}),a("el-table-column",{attrs:{property:"goodStatus",label:"租赁方式"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogOrderVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.insertOrder}},[t._v("确 定 下 单")])],1)],1)],1)},s=[],i=(o("ac6a"),o("6b54"),o("386d"),{name:"rent",data:function(){return{goodsList:[],search:"",buttonName:"所有商品",dialogVisible:!1,dialogOrderVisible:!1,gridData:[],gridOrderData:[],uuid:""}},created:function(){this.getAllGood()},methods:{getAllGood:function(t){var e=this;void 0==t&&(t=""),this.$http.get("/good/findGoods?goodName="+t).then((function(t){if(console.log(t),"200"==t.status)for(var o=0;o<t.data.length;o++)t.data[o].goodStatus>0&&e.goodsList.push(t.data[o]);else e.$message.error("出错了！")})).catch((function(t){console.log(t)}))},handleCommand:function(t){this.buttonName=t},searchGoods:function(){var t,e=this;this.goodsList=[],"所有商品"!=this.buttonName?(t="先租后买"==this.buttonName?1:"以租代售"==this.buttonName?2:3,0!=t&&""==this.search?this.$http.get("good/findGoodsByStatus?status="+t).then((function(t){if("200"==t.status){for(var o=0;o<t.data.length;o++)t.data[o].goodStatus<=0&&t.data.splice(o,1);e.goodsList=t.data}else e.$message.error("出错了！")})).catch((function(t){return console.log(t)})):0!=t&&""!=this.search&&this.$http.get("/good/findGoodsByStatusAndName?status="+t+"&goodName="+this.search.trim()).then((function(t){if("200"==t.status){for(var o=0;o<t.data.length;o++)t.data[o].goodStatus<=0&&t.data.splice(o,1);e.goodsList=t.data}else e.$message.error("出错了！")})).catch((function(t){return console.log(t)}))):this.getAllGood(this.search)},getUUID:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},checkCart:function(){this.dialogVisible=!0},addToCart:function(t){var e=JSON.parse(JSON.stringify(t));1==e.goodStatus?e.goodStatus="先租后买":2==e.goodStatus?e.goodStatus="以租代买":e.goodStatus="共享租赁",this.gridData.push(e),this.$message.success("加入购物车成功！")},handleDelete:function(t,e){var o=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){for(var t=0;t<o.gridData.length;t++)o.gridData[t].goodId==e.goodId&&o.gridData.splice(t,1)})).catch((function(t){return console.log(t)})),console.log(this.gridData)},rentForSure:function(){if(this.gridOrderData=this.gridData,this.gridData=[],""==this.uuid){var t=this.getUUID()+this.getUUID()+"-"+this.getUUID()+"-"+this.getUUID()+"-"+this.getUUID()+"-"+this.getUUID()+this.getUUID()+this.getUUID();this.uuid=t}this.dialogOrderVisible=!0,this.dialogVisible=!1},checkOrder:function(){if(""==this.uuid){var t=this.getUUID()+this.getUUID()+"-"+this.getUUID()+"-"+this.getUUID()+"-"+this.getUUID()+"-"+this.getUUID()+this.getUUID()+this.getUUID();this.uuid=t}this.dialogOrderVisible=!0},insertOrder:function(){var t=this;this.gridData=[];var e="",o=0;this.gridOrderData.forEach((function(t){e+=","+t.goodNum,o+=t.goodPrice,console.log(t.goodPrice)})),console.log(this.gridOrderData);var a={},s=localStorage.getItem("userId"),i=new Date,r=i.getFullYear(),l=i.getMonth()+1,n=i.getDate(),d=r+"-"+l+"-"+n;a.goods=e,a.userId=s,a.orderTime=d,a.orderPrice=o,a.orderNum=this.uuid,console.log(a.orderTime),this.$http.post("/orderList/insertOrder",a).then((function(e){"200"==e.status&&(t.dialogOrderVisible=!1,t.gridData=[],t.gridOrderData=[],t.$message.success("成功生成订单！")),console.log(e)})).catch((function(t){return console.log(t)})),this.dialogOrderVisible=!1}}}),r=i,l=(o("52bd"),o("2877")),n=Object(l["a"])(r,a,s,!1,null,"4bf0d628",null);e["default"]=n.exports},c274:function(t,e,o){t.exports=o.p+"img/book.23349d4b.jpg"}}]);
//# sourceMappingURL=donate.9ccc65d9.js.map